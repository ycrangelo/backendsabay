{"version":3,"file":"Socket.js","names":["Channel","_interopRequireWildcard","require","Context","Deferred","Effect","ExecutionStrategy","Exit","FiberRef","FiberSet","_Function","_GlobalValue","Layer","Mailbox","Predicate","Scope","_Error","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","isSocket","hasProperty","Socket","GenericTag","CloseEventTypeId","CloseEvent","code","reason","constructor","toString","isCloseEvent","SocketErrorTypeId","isSocketError","SocketGenericError","TypeIdError","message","SocketCloseError","is","isClean","closeReason","toChannelMap","self","f","gen","scope","mailbox","make","writeScope","fork","sequential","write","extend","writer","emit","chunk","data","input","awaitRead","void","catchAllCause","cause","failCause","error","zipRight","close","done","runRaw","unsafeOffer","pipe","into","forkIn","interruptible","embedInput","toChannel","unwrapScoped","encoder","TextEncoder","encode","toChannelString","dual","args","encoding","decoder","TextDecoder","decode","toChannelWith","makeChannel","unwrap","map","defaultCloseCodeIsError","WebSocket","WebSocketConstructor","layerWebSocketConstructorGlobal","succeed","url","protocols","globalThis","makeWebSocket","options","fromWebSocket","acquireRelease","flatMap","ws","sync","acquire","withFiberRuntime","fiber","currentWS","latch","unsafeMakeLatch","acquireContext","currentContext","closeCodeIsError","handler","scopedWith","fiberSet","run","provideService","runtime","open","onMessage","event","Blob","promise","arrayBuffer","andThen","buffer","Uint8Array","result","isEffect","onError","removeEventListener","onClose","unsafeDone","deferred","fail","addEventListener","once","readyState","openDeferred","unsafeMake","id","await","timeoutFail","duration","openTimeout","onTimeout","raceFirst","join","catchIf","_","mapInputContext","merge","ensuring","unsafeClose","undefined","whenOpen","send","of","makeWebSocketChannel","layerWebSocket","effect","currentSendQueueCapacity","globalValue","fromTransformStream","currentStream","stream","reader","readable","getReader","addFinalizer","cancel","runFork","tryPromise","try","value","read","catch","writers","getWriter","writable","suspend"],"sources":["../../src/Socket.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}