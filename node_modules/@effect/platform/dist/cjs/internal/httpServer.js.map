{"version":3,"file":"httpServer.js","names":["Context","_interopRequireWildcard","require","Effect","_Function","Layer","Client","ClientRequest","internalEtag","internalFileSystem","internalPlatform","internalPath","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TypeId","exports","Symbol","for","serverTag","GenericTag","serverProto","isServer","make","options","assign","create","serve","dual","args","isEffect","httpApp","middleware","scopedDiscard","flatMap","server","serveEffect","formatAddress","address","_tag","path","hostname","port","addressWith","effect","addressFormattedWith","logAddress","_","log","withLogAddress","layer","effectDiscard","pipe","provideMerge","makeTestClient","HttpClient","client","die","Error","host","url","succeed","mapRequest","prependUrl","layerTestClient","layerContext","mergeAll","layerWeak","layerNoop"],"sources":["../../../src/internal/httpServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}