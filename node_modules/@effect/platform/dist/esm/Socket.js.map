{"version":3,"file":"Socket.js","names":["Channel","Context","Deferred","Effect","ExecutionStrategy","Exit","FiberRef","FiberSet","dual","globalValue","Layer","Mailbox","Predicate","Scope","TypeIdError","TypeId","Symbol","for","isSocket","u","hasProperty","Socket","GenericTag","CloseEventTypeId","CloseEvent","code","reason","constructor","toString","isCloseEvent","SocketErrorTypeId","isSocketError","SocketGenericError","message","SocketCloseError","is","isClean","closeReason","toChannelMap","self","f","gen","scope","mailbox","make","writeScope","fork","sequential","write","extend","writer","emit","chunk","data","input","awaitRead","void","catchAllCause","cause","failCause","error","zipRight","close","done","runRaw","unsafeOffer","pipe","into","forkIn","interruptible","embedInput","toChannel","unwrapScoped","encoder","TextEncoder","encode","toChannelString","args","encoding","decoder","TextDecoder","decode","toChannelWith","makeChannel","unwrap","map","defaultCloseCodeIsError","WebSocket","WebSocketConstructor","layerWebSocketConstructorGlobal","succeed","url","protocols","globalThis","makeWebSocket","options","fromWebSocket","acquireRelease","flatMap","ws","sync","acquire","withFiberRuntime","fiber","currentWS","latch","unsafeMakeLatch","acquireContext","currentContext","closeCodeIsError","handler","scopedWith","fiberSet","run","provideService","runtime","open","onMessage","event","Blob","promise","arrayBuffer","andThen","buffer","Uint8Array","result","isEffect","onError","removeEventListener","onClose","unsafeDone","deferred","fail","addEventListener","once","readyState","openDeferred","unsafeMake","id","await","timeoutFail","duration","openTimeout","onTimeout","raceFirst","join","catchIf","_","mapInputContext","merge","ensuring","unsafeClose","undefined","whenOpen","send","of","makeWebSocketChannel","layerWebSocket","effect","currentSendQueueCapacity","fromTransformStream","currentStream","stream","reader","readable","getReader","addFinalizer","cancel","runFork","tryPromise","try","value","read","catch","writers","WeakMap","getWriter","get","writable","set","suspend"],"sources":["../../src/Socket.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAO,KAAKA,OAAO,MAAM,gBAAgB;AAEzC,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAE3C,OAAO,KAAKC,MAAM,MAAM,eAAe;AACvC,OAAO,KAAKC,iBAAiB,MAAM,0BAA0B;AAC7D,OAAO,KAAKC,IAAI,MAAM,aAAa;AACnC,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAC3C,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,WAAW,QAAQ,oBAAoB;AAChD,OAAO,KAAKC,KAAK,MAAM,cAAc;AACrC,OAAO,KAAKC,OAAO,MAAM,gBAAgB;AACzC,OAAO,KAAKC,SAAS,MAAM,kBAAkB;AAC7C,OAAO,KAAKC,KAAK,MAAM,cAAc;AAErC,SAASC,WAAW,QAAQ,YAAY;AAExC;;;;AAIA,OAAO,MAAMC,MAAM,gBAAkBC,MAAM,CAACC,GAAG,CAAC,yBAAyB,CAAC;AAQ1E;;;;AAIA,OAAO,MAAMC,QAAQ,GAAIC,CAAU,IAAkBP,SAAS,CAACQ,WAAW,CAACD,CAAC,EAAEJ,MAAM,CAAC;AAErF;;;;AAIA,OAAO,MAAMM,MAAM,gBAAgCpB,OAAO,CAACqB,UAAU,CACnE,yBAAyB,CAC1B;AAqBD;;;;AAIA,OAAO,MAAMC,gBAAgB,gBAAkBP,MAAM,CAACC,GAAG,CAAC,oCAAoC,CAAC;AAQ/F;;;;AAIA,OAAM,MAAOO,UAAU;EAKAC,IAAA;EAAsBC,MAAA;EAJ3C;;;EAGS,CAACH,gBAAgB;EAC1BI,YAAqBF,IAAA,GAAO,IAAI,EAAWC,MAAe;IAArC,KAAAD,IAAI,GAAJA,IAAI;IAAkB,KAAAC,MAAM,GAANA,MAAM;IAC/C,IAAI,CAACH,gBAAgB,CAAC,GAAGA,gBAAgB;EAC3C;EACA;;;EAGAK,QAAQA,CAAA;IACN,OAAO,IAAI,CAACF,MAAM,GAAG,GAAG,IAAI,CAACD,IAAI,KAAK,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAI,CAACD,IAAI,EAAE;EACtE;;AAGF;;;;AAIA,OAAO,MAAMI,YAAY,GAAIV,CAAU,IAAsBP,SAAS,CAACQ,WAAW,CAACD,CAAC,EAAEI,gBAAgB,CAAC;AAEvG;;;;AAIA,OAAO,MAAMO,iBAAiB,gBAAkBd,MAAM,CAACC,GAAG,CAAC,qCAAqC,CAAC;AAQjG;;;;AAIA,OAAO,MAAMc,aAAa,GAAIZ,CAAU,IAAuBP,SAAS,CAACQ,WAAW,CAACD,CAAC,EAAEW,iBAAiB,CAAC;AAQ1G;;;;AAIA,OAAM,MAAOE,kBAAmB,sBAAQlB,WAAW,CAACgB,iBAAiB,EAAE,aAAa,CAGlF;EACA,IAAIG,OAAOA,CAAA;IACT,OAAO,4BAA4B,IAAI,CAACP,MAAM,EAAE;EAClD;;AAGF;;;;AAIA,OAAM,MAAOQ,gBAAiB,sBAAQpB,WAAW,CAACgB,iBAAiB,EAAE,aAAa,CAIhF;EACA;;;EAGA,OAAOK,EAAEA,CAAChB,CAAU;IAClB,OAAOY,aAAa,CAACZ,CAAC,CAAC,IAAIA,CAAC,CAACO,MAAM,KAAK,OAAO;EACjD;EAEA;;;EAGA,OAAOU,OAAOA,CAACA,OAAkC;IAC/C,OAAO,UAASjB,CAAU;MACxB,OAAOe,gBAAgB,CAACC,EAAE,CAAChB,CAAC,CAAC,IAAIiB,OAAO,CAACjB,CAAC,CAACM,IAAI,CAAC;IAClD,CAAC;EACH;EAEA,IAAIQ,OAAOA,CAAA;IACT,IAAI,IAAI,CAACI,WAAW,EAAE;MACpB,OAAO,GAAG,IAAI,CAACX,MAAM,KAAK,IAAI,CAACD,IAAI,KAAK,IAAI,CAACY,WAAW,EAAE;IAC5D;IACA,OAAO,GAAG,IAAI,CAACX,MAAM,KAAK,IAAI,CAACD,IAAI,EAAE;EACvC;;AAGF;;;;AAIA,OAAO,MAAMa,YAAY,GAAGA,CAC1BC,IAAY,EACZC,CAAmC,KASnCrC,MAAM,CAACsC,GAAG,CAAC,aAAS;EAClB,MAAMC,KAAK,GAAG,OAAOvC,MAAM,CAACuC,KAAK;EACjC,MAAMC,OAAO,GAAG,OAAOhC,OAAO,CAACiC,IAAI,EAAuB;EAC1D,MAAMC,UAAU,GAAG,OAAOhC,KAAK,CAACiC,IAAI,CAACJ,KAAK,EAAEtC,iBAAiB,CAAC2C,UAAU,CAAC;EACzE,MAAMC,KAAK,GAAG,OAAOnC,KAAK,CAACoC,MAAM,CAACV,IAAI,CAACW,MAAM,EAAEL,UAAU,CAAC;EAC1D,UAAUM,IAAIA,CAACC,KAAoD;IACjE,KAAK,MAAMC,IAAI,IAAID,KAAK,EAAE;MACxB,OAAOJ,KAAK,CAACK,IAAI,CAAC;IACpB;EACF;EACA,MAAMC,KAAK,GAAiG;IAC1GC,SAAS,EAAEA,CAAA,KAAMpD,MAAM,CAACqD,IAAI;IAC5BL,IAAIA,CAACC,KAAK;MACR,OAAOjD,MAAM,CAACsD,aAAa,CACzBtD,MAAM,CAACsC,GAAG,CAAC,MAAMU,IAAI,CAACC,KAAK,CAAC,CAAC,EAC5BM,KAAK,IAAKf,OAAO,CAACgB,SAAS,CAACD,KAAK,CAAC,CACpC;IACH,CAAC;IACDE,KAAKA,CAACA,KAAK;MACT,OAAOzD,MAAM,CAAC0D,QAAQ,CACpBhD,KAAK,CAACiD,KAAK,CAACjB,UAAU,EAAExC,IAAI,CAACmD,IAAI,CAAC,EAClCb,OAAO,CAACgB,SAAS,CAACC,KAAK,CAAC,CACzB;IACH,CAAC;IACDG,IAAIA,CAAA;MACF,OAAOlD,KAAK,CAACiD,KAAK,CAACjB,UAAU,EAAExC,IAAI,CAACmD,IAAI,CAAC;IAC3C;GACD;EAED,OAAOjB,IAAI,CAACyB,MAAM,CAAEX,IAAI,IAAI;IAC1BV,OAAO,CAACsB,WAAW,CAACzB,CAAC,CAACa,IAAI,CAAC,CAAC;EAC9B,CAAC,CAAC,CAACa,IAAI,CACLvD,OAAO,CAACwD,IAAI,CAACxB,OAAO,CAAC,EACrBxC,MAAM,CAACiE,MAAM,CAAC1B,KAAK,CAAC,EACpBvC,MAAM,CAACkE,aAAa,CACrB;EAED,OAAOrE,OAAO,CAACsE,UAAU,CAAC3D,OAAO,CAAC4D,SAAS,CAAC5B,OAAO,CAAC,EAAEW,KAAK,CAAC;AAC9D,CAAC,CAAC,CAACY,IAAI,CAAClE,OAAO,CAACwE,YAAY,CAAC;AAE/B;;;;AAIA,OAAO,MAAMD,SAAS,GACpBhC,IAAY,IAQV;EACF,MAAMkC,OAAO,GAAG,IAAIC,WAAW,EAAE;EACjC,OAAOpC,YAAY,CAACC,IAAI,EAAGc,IAAI,IAAK,OAAOA,IAAI,KAAK,QAAQ,GAAGoB,OAAO,CAACE,MAAM,CAACtB,IAAI,CAAC,GAAGA,IAAI,CAAC;AAC7F,CAAC;AAED;;;;AAIA,OAAO,MAAMuB,eAAe,gBAyBxBpE,IAAI,CAAEqE,IAAI,IAAK3D,QAAQ,CAAC2D,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CACpCtC,IAAY,EACZuC,QAA6B,KAQ3B;EACF,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAACF,QAAQ,CAAC;EACzC,OAAOxC,YAAY,CAACC,IAAI,EAAGc,IAAI,IAAK,OAAOA,IAAI,KAAK,QAAQ,GAAGA,IAAI,GAAG0B,OAAO,CAACE,MAAM,CAAC5B,IAAI,CAAC,CAAC;AAC7F,CAAC,CAAC;AAEF;;;;AAIA,OAAO,MAAM6B,aAAa,GAAGA,CAAA,KAE3B3C,IAAY,IAQTgC,SAAS,CAAChC,IAAI,CAAC;AAEpB;;;;AAIA,OAAO,MAAM4C,WAAW,GAAGA,CAAA,KAQtBnF,OAAO,CAACoF,MAAM,CAACjF,MAAM,CAACkF,GAAG,CAAChE,MAAM,EAAE6D,aAAa,EAAM,CAAC,CAAC;AAE5D;;;AAGA,OAAO,MAAMI,uBAAuB,GAAI7D,IAAY,IAAKA,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,IAAI;AAUvF;;;;AAIA,OAAO,MAAM8D,SAAS,gBAAiDtF,OAAO,CAACqB,UAAU,CACvF,mCAAmC,CACpC;AAUD;;;;AAIA,OAAO,MAAMkE,oBAAoB,gBAG7BvF,OAAO,CACRqB,UAAU,CAAC,8CAA8C,CAAC;AAE7D;;;;AAIA,OAAO,MAAMmE,+BAA+B,gBAAsC/E,KAAK,CAACgF,OAAO,CAC7FF,oBAAoB,EACpB,CAACG,GAAG,EAAEC,SAAS,KAAK,IAAIC,UAAU,CAACN,SAAS,CAACI,GAAG,EAAEC,SAAS,CAAC,CAC7D;AAED;;;;AAIA,OAAO,MAAME,aAAa,GAAGA,CAACH,GAAmC,EAAEI,OAIlE,KACCC,aAAa,CACX7F,MAAM,CAAC8F,cAAc,CACnB,CAAC,OAAON,GAAG,KAAK,QAAQ,GAAGxF,MAAM,CAACuF,OAAO,CAACC,GAAG,CAAC,GAAGA,GAAG,EAAEzB,IAAI,CACxD/D,MAAM,CAAC+F,OAAO,CAAEP,GAAG,IAAKxF,MAAM,CAACkF,GAAG,CAACG,oBAAoB,EAAGhD,CAAC,IAAKA,CAAC,CAACmD,GAAG,EAAEI,OAAO,EAAEH,SAAS,CAAC,CAAC,CAAC,CAC7F,EACAO,EAAE,IAAKhG,MAAM,CAACiG,IAAI,CAAC,MAAMD,EAAE,CAACrC,KAAK,CAAC,IAAI,CAAC,CAAC,CAC1C,EACDiC,OAAO,CACR;AAEH;;;;AAIA,OAAO,MAAMC,aAAa,GAAGA,CAC3BK,OAA6D,EAC7DN,OAGC,KAED5F,MAAM,CAACmG,gBAAgB,CAAEC,KAAK,IAAI;EAChC,IAAIC,SAA2C;EAC/C,MAAMC,KAAK,GAAGtG,MAAM,CAACuG,eAAe,CAAC,KAAK,CAAC;EAC3C,MAAMC,cAAc,GAAGJ,KAAK,CAACK,cAAqC;EAClE,MAAMC,gBAAgB,GAAGd,OAAO,EAAEc,gBAAgB,IAAIvB,uBAAuB;EAE7E,MAAMtB,MAAM,GAAa8C,OAAkE,IACzF3G,MAAM,CAAC4G,UAAU,CAAErE,KAAK,IACtBvC,MAAM,CAACsC,GAAG,CAAC,aAAS;IAClB,MAAMuE,QAAQ,GAAG,OAAOzG,QAAQ,CAACqC,IAAI,EAAwB,CAACsB,IAAI,CAChErD,KAAK,CAACoC,MAAM,CAACP,KAAK,CAAC,CACpB;IACD,MAAMyD,EAAE,GAAG,OAAOtF,KAAK,CAACoC,MAAM,CAACoD,OAAO,EAAE3D,KAAK,CAAC;IAC9C,MAAMuE,GAAG,GAAG,OAAO9G,MAAM,CAAC+G,cAAc,CAAC3G,QAAQ,CAAC4G,OAAO,CAACH,QAAQ,CAAC,EAAK,EAAEzB,SAAS,EAAEY,EAAE,CAAC;IACxF,IAAIiB,IAAI,GAAG,KAAK;IAEhB,SAASC,SAASA,CAACC,KAAmB;MACpC,IAAIA,KAAK,CAACjE,IAAI,YAAYkE,IAAI,EAAE;QAC9B,OAAOpH,MAAM,CAACqH,OAAO,CAAC,MAAMF,KAAK,CAACjE,IAAI,CAACoE,WAAW,EAA0B,CAAC,CAACvD,IAAI,CAChF/D,MAAM,CAACuH,OAAO,CAAEC,MAAM,IAAKb,OAAO,CAAC,IAAIc,UAAU,CAACD,MAAM,CAAC,CAAC,CAAC,EAC3DV,GAAG,CACJ;MACH;MACA,MAAMY,MAAM,GAAGf,OAAO,CAACQ,KAAK,CAACjE,IAAI,CAAC;MAClC,IAAIlD,MAAM,CAAC2H,QAAQ,CAACD,MAAM,CAAC,EAAE;QAC3BZ,GAAG,CAACY,MAAM,CAAC;MACb;IACF;IACA,SAASE,OAAOA,CAACrE,KAAY;MAC3ByC,EAAE,CAAC6B,mBAAmB,CAAC,SAAS,EAAEX,SAAS,CAAC;MAC5ClB,EAAE,CAAC6B,mBAAmB,CAAC,OAAO,EAAEC,OAAO,CAAC;MACxC/H,QAAQ,CAACgI,UAAU,CACjBlB,QAAQ,CAACmB,QAAQ,EACjBhI,MAAM,CAACiI,IAAI,CAAC,IAAIpG,kBAAkB,CAAC;QAAEN,MAAM,EAAE0F,IAAI,GAAG,MAAM,GAAG,MAAM;QAAE1D;MAAK,CAAE,CAAC,CAAC,CAC/E;IACH;IACA,SAASuE,OAAOA,CAACX,KAA4B;MAC3CnB,EAAE,CAAC6B,mBAAmB,CAAC,SAAS,EAAEX,SAAS,CAAC;MAC5ClB,EAAE,CAAC6B,mBAAmB,CAAC,OAAO,EAAED,OAAO,CAAC;MACxC7H,QAAQ,CAACgI,UAAU,CACjBlB,QAAQ,CAACmB,QAAQ,EACjBhI,MAAM,CAACiI,IAAI,CACT,IAAIlG,gBAAgB,CAAC;QACnBR,MAAM,EAAE,OAAO;QACfD,IAAI,EAAE6F,KAAK,CAAC7F,IAAI;QAChBY,WAAW,EAAEiF,KAAK,CAAC5F;OACpB,CAAC,CACH,CACF;IACH;IAEAyE,EAAE,CAACkC,gBAAgB,CAAC,OAAO,EAAEJ,OAAO,EAAE;MAAEK,IAAI,EAAE;IAAI,CAAE,CAAC;IACrDnC,EAAE,CAACkC,gBAAgB,CAAC,OAAO,EAAEN,OAAO,EAAE;MAAEO,IAAI,EAAE;IAAI,CAAE,CAAC;IACrDnC,EAAE,CAACkC,gBAAgB,CAAC,SAAS,EAAEhB,SAAS,CAAC;IAEzC,IAAIlB,EAAE,CAACoC,UAAU,KAAK,CAAC,EAAE;MACvB,MAAMC,YAAY,GAAGtI,QAAQ,CAACuI,UAAU,CAAOlC,KAAK,CAACmC,EAAE,EAAE,CAAC;MAC1DvC,EAAE,CAACkC,gBAAgB,CAAC,MAAM,EAAE,MAAK;QAC/BjB,IAAI,GAAG,IAAI;QACXlH,QAAQ,CAACgI,UAAU,CAACM,YAAY,EAAErI,MAAM,CAACqD,IAAI,CAAC;MAChD,CAAC,EAAE;QAAE8E,IAAI,EAAE;MAAI,CAAE,CAAC;MAClB,OAAOpI,QAAQ,CAACyI,KAAK,CAACH,YAAY,CAAC,CAACtE,IAAI,CACtC/D,MAAM,CAACyI,WAAW,CAAC;QACjBC,QAAQ,EAAE9C,OAAO,EAAE+C,WAAW,IAAI,KAAK;QACvCC,SAAS,EAAEA,CAAA,KACT,IAAI/G,kBAAkB,CAAC;UAAEN,MAAM,EAAE,aAAa;UAAEgC,KAAK,EAAE;QAA8B,CAAE;OAC1F,CAAC,EACFvD,MAAM,CAAC6I,SAAS,CAACzI,QAAQ,CAAC0I,IAAI,CAACjC,QAAQ,CAAC,CAAC,CAC1C;IACH;IACAI,IAAI,GAAG,IAAI;IACXZ,SAAS,GAAGL,EAAE;IACd,OAAOM,KAAK,CAACW,IAAI;IACjB,OAAO,OAAO7G,QAAQ,CAAC0I,IAAI,CAACjC,QAAQ,CAAC,CAAC9C,IAAI,CACxC/D,MAAM,CAAC+I,OAAO,CACZhH,gBAAgB,CAACE,OAAO,CAAE+G,CAAC,IAAK,CAACtC,gBAAgB,CAACsC,CAAC,CAAC,CAAC,EACpDA,CAAC,IAAKhJ,MAAM,CAACqD,IAAI,CACnB,CACF;EACH,CAAC,CAAC,CACH,CAACU,IAAI,CACJ/D,MAAM,CAACiJ,eAAe,CAAE9F,KAAyB,IAAKrD,OAAO,CAACoJ,KAAK,CAAC1C,cAAc,EAAErD,KAAK,CAAC,CAAC,EAC3FnD,MAAM,CAACmJ,QAAQ,CAACnJ,MAAM,CAACiG,IAAI,CAAC,MAAK;IAC/BK,KAAK,CAAC8C,WAAW,EAAE;IACnB/C,SAAS,GAAGgD,SAAS;EACvB,CAAC,CAAC,CAAC,EACHrJ,MAAM,CAACkE,aAAa,CACrB;EAEH,MAAMI,OAAO,GAAG,IAAIC,WAAW,EAAE;EACjC,MAAMuC,GAAG,GAAaH,OAAyD,IAC7E9C,MAAM,CAAEX,IAAI,IACV,OAAOA,IAAI,KAAK,QAAQ,GACpByD,OAAO,CAACrC,OAAO,CAACE,MAAM,CAACtB,IAAI,CAAC,CAAC,GAC7BA,IAAI,YAAYuE,UAAU,GAC1Bd,OAAO,CAACzD,IAAI,CAAC,GACbyD,OAAO,CAAC,IAAIc,UAAU,CAACvE,IAAI,CAAC,CAAC,CAClC;EAEH,MAAML,KAAK,GAAII,KAAuC,IACpDqD,KAAK,CAACgD,QAAQ,CAACtJ,MAAM,CAACiG,IAAI,CAAC,MAAK;IAC9B,MAAMD,EAAE,GAAGK,SAAU;IACrB,IAAI3E,YAAY,CAACuB,KAAK,CAAC,EAAE;MACvB+C,EAAE,CAACrC,KAAK,CAACV,KAAK,CAAC3B,IAAI,EAAE2B,KAAK,CAAC1B,MAAM,CAAC;IACpC,CAAC,MAAM;MACLyE,EAAE,CAACuD,IAAI,CAACtG,KAAK,CAAC;IAChB;EACF,CAAC,CAAC,CAAC;EACL,MAAMF,MAAM,GAAG/C,MAAM,CAACuF,OAAO,CAAC1C,KAAK,CAAC;EAEpC,OAAO7C,MAAM,CAACuF,OAAO,CAACrE,MAAM,CAACsI,EAAE,CAAC;IAC9B,CAAC5I,MAAM,GAAGA,MAAM;IAChBkG,GAAG;IACHjD,MAAM;IACNd;GACD,CAAC,CAAC;AACL,CAAC,CAAC;AAEJ;;;;AAIA,OAAO,MAAM0G,oBAAoB,GAAGA,CAClCjE,GAAW,EACXI,OAEC,KAUD/F,OAAO,CAACwE,YAAY,CAClBrE,MAAM,CAACkF,GAAG,CAACS,aAAa,CAACH,GAAG,EAAEI,OAAO,CAAC,EAAEb,aAAa,EAAM,CAAC,CAC7D;AAEH;;;;AAIA,OAAO,MAAM2E,cAAc,GAAGA,CAAClE,GAAW,EAAEI,OAE3C,KACCrF,KAAK,CAACoJ,MAAM,CACVzI,MAAM,EACNyE,aAAa,CAACH,GAAG,EAAEI,OAAO,CAAC,CAC5B;AAEH;;;;AAIA,OAAO,MAAMgE,wBAAwB,gBAA8BtJ,WAAW,CAC5E,kDAAkD,EAClD,MAAMH,QAAQ,CAACmI,UAAU,CAAC,EAAE,CAAC,CAC9B;AAWD;;;;AAIA,OAAO,MAAMuB,mBAAmB,GAAGA,CAAI3D,OAA4D,EAAEN,OAEpG,KACC5F,MAAM,CAACmG,gBAAgB,CAAEC,KAAK,IAAI;EAChC,MAAME,KAAK,GAAGtG,MAAM,CAACuG,eAAe,CAAC,KAAK,CAAC;EAC3C,IAAIuD,aAGS;EACb,MAAMtD,cAAc,GAAGJ,KAAK,CAACK,cAAoC;EACjE,MAAMC,gBAAgB,GAAGd,OAAO,EAAEc,gBAAgB,IAAIvB,uBAAuB;EAC7E,MAAMtB,MAAM,GAAa8C,OAAkE,IACzF3G,MAAM,CAAC4G,UAAU,CAAErE,KAAK,IACtBvC,MAAM,CAACsC,GAAG,CAAC,aAAS;IAClB,MAAMyH,MAAM,GAAG,OAAOrJ,KAAK,CAACoC,MAAM,CAACoD,OAAO,EAAE3D,KAAK,CAAC;IAClD,MAAMyH,MAAM,GAAGD,MAAM,CAACE,QAAQ,CAACC,SAAS,EAAE;IAC1C,OAAOxJ,KAAK,CAACyJ,YAAY,CAAC5H,KAAK,EAAEvC,MAAM,CAACqH,OAAO,CAAC,MAAM2C,MAAM,CAACI,MAAM,EAAE,CAAC,CAAC;IACvE,MAAMvD,QAAQ,GAAG,OAAOzG,QAAQ,CAACqC,IAAI,EAAwB,CAACsB,IAAI,CAChErD,KAAK,CAACoC,MAAM,CAACP,KAAK,CAAC,CACpB;IACD,MAAM8H,OAAO,GAAG,OAAOjK,QAAQ,CAAC4G,OAAO,CAACH,QAAQ,CAAC,EAAK;IAEtD,OAAO7G,MAAM,CAACsK,UAAU,CAAC;MACvBC,GAAG,EAAE,MAAAA,CAAA,KAAW;QACd,OAAO,IAAI,EAAE;UACX,MAAM;YAAE3G,IAAI;YAAE4G;UAAK,CAAE,GAAG,MAAMR,MAAM,CAACS,IAAI,EAAE;UAC3C,IAAI7G,IAAI,EAAE;YACR,MAAM,IAAI7B,gBAAgB,CAAC;cAAER,MAAM,EAAE,OAAO;cAAED,IAAI,EAAE;YAAI,CAAE,CAAC;UAC7D;UACA,MAAMoG,MAAM,GAAGf,OAAO,CAAC6D,KAAK,CAAC;UAC7B,IAAIxK,MAAM,CAAC2H,QAAQ,CAACD,MAAM,CAAC,EAAE;YAC3B2C,OAAO,CAAC3C,MAAM,CAAC;UACjB;QACF;MACF,CAAC;MACDgD,KAAK,EAAGnH,KAAK,IAAK3B,aAAa,CAAC2B,KAAK,CAAC,GAAGA,KAAK,GAAG,IAAI1B,kBAAkB,CAAC;QAAEN,MAAM,EAAE,MAAM;QAAEgC;MAAK,CAAE;KAClG,CAAC,CAACQ,IAAI,CACL3D,QAAQ,CAAC0G,GAAG,CAACD,QAAQ,CAAC,CACvB;IAEDiD,aAAa,GAAG;MAAEC,MAAM;MAAElD;IAAQ,CAAE;IACpC,OAAOP,KAAK,CAACW,IAAI;IAEjB,OAAO,OAAO7G,QAAQ,CAAC0I,IAAI,CAACjC,QAAQ,CAAC,CAAC9C,IAAI,CACxC/D,MAAM,CAAC+I,OAAO,CACZhH,gBAAgB,CAACE,OAAO,CAAE+G,CAAC,IAAK,CAACtC,gBAAgB,CAACsC,CAAC,CAAC,CAAC,EACpDA,CAAC,IAAKhJ,MAAM,CAACqD,IAAI,CACnB,CACF;EACH,CAAC,CAAC,CACH,CAACU,IAAI,CACHiF,CAAC,IAAKA,CAAC,EACRhJ,MAAM,CAACiJ,eAAe,CAAE9F,KAAyB,IAAKrD,OAAO,CAACoJ,KAAK,CAAC1C,cAAc,EAAErD,KAAK,CAAC,CAAC,EAC3FnD,MAAM,CAACmJ,QAAQ,CAACnJ,MAAM,CAACiG,IAAI,CAAC,MAAK;IAC/BK,KAAK,CAAC8C,WAAW,EAAE;IACnBU,aAAa,GAAGT,SAAS;EAC3B,CAAC,CAAC,CAAC,EACHrJ,MAAM,CAACkE,aAAa,CACrB;EAEH,MAAMI,OAAO,GAAG,IAAIC,WAAW,EAAE;EACjC,MAAMuC,GAAG,GAAaH,OAAyD,IAC7E9C,MAAM,CAAEX,IAAI,IACV,OAAOA,IAAI,KAAK,QAAQ,GACpByD,OAAO,CAACrC,OAAO,CAACE,MAAM,CAACtB,IAAI,CAAC,CAAC,GAC7ByD,OAAO,CAACzD,IAAI,CAAC,CAClB;EAEH,MAAMyH,OAAO,GAAG,IAAIC,OAAO,EAAiE;EAC5F,MAAMC,SAAS,GAAId,MAA4B,IAAI;IACjD,IAAIhH,MAAM,GAAG4H,OAAO,CAACG,GAAG,CAACf,MAAM,CAAC;IAChC,IAAI,CAAChH,MAAM,EAAE;MACXA,MAAM,GAAGgH,MAAM,CAACgB,QAAQ,CAACF,SAAS,EAAE;MACpCF,OAAO,CAACK,GAAG,CAACjB,MAAM,EAAEhH,MAAM,CAAC;IAC7B;IACA,OAAOA,MAAM;EACf,CAAC;EACD,MAAMF,KAAK,GAAII,KAAuC,IACpDqD,KAAK,CAACgD,QAAQ,CAACtJ,MAAM,CAACiL,OAAO,CAAC,MAAK;IACjC,MAAM;MAAEpE,QAAQ;MAAEkD;IAAM,CAAE,GAAGD,aAAc;IAC3C,IAAIpI,YAAY,CAACuB,KAAK,CAAC,EAAE;MACvB,OAAOlD,QAAQ,CAACkI,IAAI,CAClBpB,QAAQ,CAACmB,QAAQ,EACjB,IAAIjG,gBAAgB,CAAC;QAAER,MAAM,EAAE,OAAO;QAAED,IAAI,EAAE2B,KAAK,CAAC3B,IAAI;QAAEY,WAAW,EAAEe,KAAK,CAAC1B;MAAM,CAAE,CAAC,CACvF;IACH;IACA,OAAOvB,MAAM,CAACqH,OAAO,CAAC,MAAMwD,SAAS,CAACd,MAAM,CAAC,CAAClH,KAAK,CAAC,OAAOI,KAAK,KAAK,QAAQ,GAAGqB,OAAO,CAACE,MAAM,CAACvB,KAAK,CAAC,GAAGA,KAAK,CAAC,CAAC;EACjH,CAAC,CAAC,CAAC;EACL,MAAMF,MAAM,GAAG/C,MAAM,CAAC8F,cAAc,CAClC9F,MAAM,CAACuF,OAAO,CAAC1C,KAAK,CAAC,EACrB,MACE7C,MAAM,CAACqH,OAAO,CAAC,YAAW;IACxB,IAAI,CAACyC,aAAa,EAAE;IACpB,MAAMe,SAAS,CAACf,aAAa,CAACC,MAAM,CAAC,CAACpG,KAAK,EAAE;EAC/C,CAAC,CAAC,CACL;EAED,OAAO3D,MAAM,CAACuF,OAAO,CAACrE,MAAM,CAACsI,EAAE,CAAC;IAC9B,CAAC5I,MAAM,GAAGA,MAAM;IAChBkG,GAAG;IACHjD,MAAM;IACNd;GACD,CAAC,CAAC;AACL,CAAC,CAAC","ignoreList":[]}