{"version":3,"file":"workerRunner.js","names":["Cause","Chunk","Context","Effect","Either","Fiber","pipe","Layer","Schedule","Schema","Stream","Transferable","isWorkerError","WorkerError","PlatformRunnerTypeId","Symbol","for","PlatformRunner","GenericTag","run","process","options","gen","platform","backing","start","fiberMap","Map","portId","id","kind","data","span","fiber","get","void","interrupt","withFiberRuntime","set","decode","succeed","flatMap","input","collector","unsafeMakeCollector","stream","effect","isEffect","out","encodeOutput","provideService","Collector","payload","send","unsafeRead","runForEachChunk","chunk","undefined","toReadonlyArray","unsafeClear","forEach","andThen","withParentSpan","_tag","traceId","spanId","sampled","context","empty","uninterruptibleMask","restore","catchIf","error","encodeCause","fail","catchAllCause","cause","match","failureOrCause","onLeft","encodeError","onRight","ensuring","sync","delete","make","tapErrorCause","isInterruptedOnly","logWarning","retry","spaced","annotateLogs","package","module","interruptAsFork","interruptible","forkScoped","asVoid","layer","scopedDiscard","makeSerialized","schema","handlers","_","scope","parseRequest","decodeUnknown","request","result","isLayer","buildWithScope","merge","provide","provideContext","message","mapError","reason","serializeFailure","serializeSuccess","layerSerialized"],"sources":["../../../src/internal/workerRunner.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}