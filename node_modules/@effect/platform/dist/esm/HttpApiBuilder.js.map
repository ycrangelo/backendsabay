{"version":3,"file":"HttpApiBuilder.js","names":["Cause","Chunk","Context","Effect","Encoding","Fiber","identity","globalValue","Layer","ManagedRuntime","Option","ParseResult","pipeArguments","Redacted","Schema","unify","HttpApi","HttpApiDecodeError","HttpApiMiddleware","HttpApiSchema","HttpApp","HttpMethod","HttpMiddleware","HttpRouter","HttpServer","HttpServerRequest","HttpServerResponse","OpenApi","UrlParams","Router","Tag","api","effect","Api","map","context","serve","middleware","httpApp","pipe","app","unwrapEffect","provide","Live","Middleware","layer","gen","makeMiddlewareMap","middlewares","router","applyMiddleware","apiMiddlewareService","apiMiddleware","retrieve","errorSchema","makeErrorSchema","encodeError","encodeUnknown","catchAllCause","cause","matchEffect","squash","onFailure","failCause","onSuccess","succeed","toWebHandler","options","runtime","make","mergeAll","memoMap","handlerCached","handlerPromise","rt","runtimeEffect","handler","toWebHandlerRuntime","runPromise","request","undefined","then","dispose","HandlersTypeId","Symbol","for","HandlersProto","_Endpoints","arguments","handle","name","endpoint","group","endpoints","makeHandlers","handlers","append","withFullResponse","handleRaw","self","Object","create","groupName","build","use","groups","result","empty","isEffect","groupMiddleware","routes","item","push","handlerToRoute","mapInputContext","input","merge","concat","fromIterable","_api","_groupName","_name","f","requestPayload","urlParams","hasBody","method","contentType","headers","toLowerCase","trim","includes","orDie","json","multipart","urlParamsBody","toRecord","startsWith","text","arrayBuffer","buffer","Uint8Array","initial","Map","forEach","tag","set","key","unsafeGet","endpoint_","isFullResponse","decodePath","pathSchema","decodeUnknown","decodePayload","payloadSchema","decodeHeaders","headersSchema","decodeUrlParams","urlParamsSchema","encodeSuccess","encode","makeSuccessSchema","successSchema","makeRoute","path","fiber","getOrThrow","getCurrentFiber","currentContext","httpRequest","routeContext","RouteContext","ParsedSearchParams","_tag","value","params","payload","flatMap","response","catchIf","isParseError","refailParseError","entry","values","SecurityTypeId","makeSecurityMiddleware","optional","previous","provides","provideService","_","provideServiceEffect","zipRight","securityMiddlewareCache","WeakMap","has","get","security","entries","decode","securityDecode","catchAll","void","responseSchema","declare","isServerResponse","schema","schemas","Set","deunionize","Union","Array","from","toResponseSuccess","toResponseError","decodeForbidden","__","ast","fail","Forbidden","toResponseSchema","getStatus","cache","schemaToResponse","data","isEmpty","isVoid","to","status","encoding","getEncoding","kind","mapError","error","Type","uint8Array","transform","transformOrFail","getStatusSuccessAST","getStatusErrorAST","sync","of","add","prev","middlewareAdd","service","middlewareAddNoContext","args","apiFirst","isHttpApi","withContext","effectDiscard","middlewareScoped","scopedDiscard","middlewareCors","cors","middlewareOpenApi","spec","fromApi","bearerLen","length","basicLen","authorization","slice","Struct","String","in","schemaSearchParams","schemaCookies","schemaHeaders","match","username","password","decodeBase64String","header","parts","split","securitySetCookie","stringValue","appendPreResponseHandler","_req","setCookie","secure","httpOnly"],"sources":["../../src/HttpApiBuilder.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}