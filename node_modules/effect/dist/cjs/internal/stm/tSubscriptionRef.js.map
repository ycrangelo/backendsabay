{"version":3,"file":"tSubscriptionRef.js","names":["Effect","_interopRequireWildcard","require","_Function","Option","_Pipeable","STM","TPubSub","TQueue","TRef","stream","_tQueue","_tRef","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TSubscriptionRefSymbolKey","TSubscriptionRefTypeId","exports","Symbol","for","TSubscriptionRefVariance","_A","_","TDequeueMerge","first","second","TDequeueTypeId","tDequeueVariance","constructor","peek","gen","peekOption","_tag","value","retry","none","take","isEmpty","takeAll","takeUpTo","max","length","capacity","size","isFull","shutdown","isShutdown","awaitShutdown","TSubscriptionRefImpl","ref","pubsub","TRefTypeId","tRefVariance","todos","versioned","pipe","pipeArguments","arguments","changes","unbounded","offer","subscribe","modify","f","map","flatMap","b","as","zipLeft","publish","make","all","self","dual","getAndSet","getAndUpdate","getAndUpdateSome","match","onNone","onSome","setAndGet","modifySome","fallback","update","updateAndGet","updateSome","updateSomeAndGet","changesScoped","acquireRelease","changesStream","unwrap","fromTQueue"],"sources":["../../../../src/internal/stm/tSubscriptionRef.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}